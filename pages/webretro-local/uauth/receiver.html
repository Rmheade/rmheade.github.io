<!DOCTYPE html>
<html>
	<head>
    <script>
      // Prevent direct access - only allow iframe loading
      if (window.self === window.top) {
        window.location.href = '/';
      }
      
      // Listen for tilde key from parent window
      window.addEventListener("message", (event) => {
        if (event.data && event.data.type === "tilde-pressed") {
          window.parent.postMessage({ type: "tilde-pressed" }, "*");
        }
      });
      
      // Send tilde key press to parent window
      document.addEventListener("keydown", (e) => {
        if (e.key === "`") {
          window.parent.postMessage({ type: "tilde-pressed" }, "*");
          window.location.href = '/';
        }
      });
    </script>
<title>Choose a File</title>
	</head>
	<body>
		<h2>I'm supposed to be an invisible iframe... (you shouldn't see this)</h2>
		<script>
		let uauthBC = new BroadcastChannel("uauth");
		window.addEventListener("message", function(e) {
			uauthBC.postMessage(e.data);
			window.parent.postMessage("acknowledged", "*");
		}, false);
		</script>
	</body>
</html>